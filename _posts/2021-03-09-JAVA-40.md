---
layout: post
title: "JAVA-ì´ê²ƒì´ ìë°”ë‹¤ : TCP ë„¤íŠ¸ì›Œí‚¹(2)"
date: 2021-03-09
category : [JAVA]
comments: true
---

# ğŸ”¶ ì´ê²ƒì´ ìë°”ë‹¤ : TCP ë„¤íŠ¸ì›Œí‚¹(2)

## âœ” TCP ë„¤íŠ¸ì›Œí‚¹(2)

ğŸ’¡ ì±„íŒ… í”„ë¡œê·¸ë¨

- ì„œë²„ ì½”ë“œ
    ```java
    package sec07.exam03_chatting;

    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.io.UnsupportedEncodingException;
    import java.net.InetSocketAddress;
    import java.net.ServerSocket;
    import java.net.Socket;
    import java.util.Iterator;
    import java.util.List;
    import java.util.Vector;
    import java.util.concurrent.ExecutorService;
    import java.util.concurrent.Executors;

    import javafx.application.Application;
    import javafx.application.Platform;
    import javafx.geometry.Insets;
    import javafx.scene.Scene;
    import javafx.scene.control.Button;
    import javafx.scene.control.TextArea;
    import javafx.scene.layout.BorderPane;
    import javafx.stage.Stage;

    // í´ë˜ìŠ¤ ì„ ì–¸
    // Application ì„ ìƒì†í•œë‹¤ => java fxì‹¤í–‰í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•´
    public class ServerExample extends Application {
        
        // í•„ë“œ ì„ ì–¸
        ExecutorService executorService; // ìŠ¤ë ˆë“œí’€ ìƒì„±ìœ„í•´ ì„ ì–¸
        ServerSocket serverSocket; // í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²°ìš”ì²­ ìˆ˜ë½í•˜ê¸° ìœ„í•´ ì„ ì–¸
        
        // List<Client> => ì•„ë˜ class Clientë¥¼  ê°ì²´ ìƒì„± í•´ Listì— ì €ì¥
        // Vector : ìŠ¤ë ˆë“œì— ì•ˆì „í•˜ë‹¤
        List<Client> connections = new Vector<Client>(); // 
        
        void startServer() { // ì„œë²„ ì‹œì‘ ì½”ë“œ
            // start ë²„íŠ¼ ëˆŒë €ì„ ë•Œ ì‹¤í–‰
            
            // 1) ExecutorService ê°ì²´ ë§Œë“¤ê¸°
            // executorService ë¼ê³  í•˜ëŠ” ìŠ¤ë ˆë“œ í’€ ê±•ì²´ ìƒì„±
            executorService = Executors.newFixedThreadPool(
                    // ìŠ¤ë ˆë“œ ìµœëŒ€ê°¯ìˆ˜ ì…ë ¥
                    // í˜„ì¬ PCì˜ CPUê°€ ì§€ì›í•˜ëŠ” ì½”ì–´ì˜ ìˆ˜ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤ =>ì½”ì–´ì˜ ìˆ˜ ë§Œí¼ ì“°ë ˆë“œ ìƒì„±
                    Runtime.getRuntime().availableProcessors()
                );
                try {
                    // 2) ServerSocket ê°ì²´ ë§Œë“¤ì–´ í¬íŠ¸ì— binding í•œë‹¤
                    serverSocket = new ServerSocket();
                    serverSocket.bind(new InetSocketAddress("localhost",5001));
                }catch(Exception e) {
                    if(!serverSocket.isClosed()) {
                        stopServer();
                    }
                    return; // startì„œë²„ ì¢…ë£Œ
                    
                }	
                
                // 3) ì—°ê²° ìˆ˜ë½ ì‘ì—…ì„ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ Runnableê°ì²´ë¥¼ ë§Œë“¤ì–´
                // executorService ì— submit ë©”ì†Œë“œë¥¼ ì œê³µí•˜ëŠ” ì½”ë“œ ì‘ì„±
                
                // Runnable ê°ì²´ ìƒì„± => ì—°ê²° ìˆ˜ë½ ì‘ì—… ê°ì²´
                Runnable runnable = new Runnable() {
                    // ctrl + space í•´ì„œ runë©”ì†Œë“œ ì˜¤ë²„ë¼ì´ë“œ
                    @Override
                    public void run() {
                        // ì—°ê²° ìˆ˜ë½ì„ ìœ„í•œ ì½”ë“œ ì‘ì„±
                        
                        // ì²« í™”ë©´ì— ë„ìš¸ ë¬¸êµ¬ ì‘ì„±
                        Platform.runLater(()->{ // UIë³€ê²½ ì½”ë“œ
                            displayText("[ì„œë²„ì‹œì‘]");
                            btnStartStop.setText("stop"); // start ë²„íŠ¼ì„ ëˆ„ë£¨ë©´ í•´ë‹¹ ë²„íŠ¼ì´ stopìœ¼ë¡œ ë°”ë€ŒëŠ” ì½”ë“œ
                        });
                        
                        // ë¬´í•œë£¨í”„ ì‘ì„± => í´ë¼ì´ì–¸íŠ¸ì— ì—°ê²° ìˆ˜ë½ ì‘ì—…ì„ ê³„ì†ì ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ì½”ë“œ ì‘ì„±
                        while(true){
                            try {	
                                // í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°ìš”ì²­í•˜ë©´ accept ê°€ ì—°ê²° ìˆ˜ë½ì„ í•˜ê³  socket ì„ ë¦¬í„´í•œë‹¤
                            Socket socket = serverSocket.accept();
                            // ë¡œê·¸ ì¶œë ¥ -> í´ë¼ì´ì–¸íŠ¸ IPì™€ , í˜„ì¬ ë‹´ë‹¹ ìŠ¤ë ˆë“œ í’€ì˜ ì´ë¦„ì„ ì¶œë ¥í•œë‹¤
                            String message = "[ì—°ê²° ìˆ˜ë½ : " + socket.getRemoteSocketAddress()+ ":" 
                                                + Thread.currentThread().getName() + "]" ;
                            Platform.runLater(()->{
                                displayText(message);
                            });
                            
        
                            // í´ë¼ì´ì–¸íŠ¸ ì—°ê²° í•˜ë‚˜ë‹¹  í´ë¼ì´ì–¸íŠ¸ ê°ì²´ë¥¼ ìƒì„±í•´ì„œ List<Client>ì— ì €ì¥í•œë‹¤
                            Client client = new Client(socket);
                            
                            // connections ì— í´ë¼ì´ì–¸íŠ¸ ì €ì¥
                            connections.add(client);
                            
                            // ë¡œê·¸ ì¶œë ¥ => ëªŠê°œì˜ í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²° ë˜ì—ˆëŠ”ì§€ ì¶œë ¥
                            Platform.runLater(()->{
                                displayText("[ì—°ê²° ê°œìˆ˜ : " + connections.size()+ "]" );
                            });
                            
                            } catch (Exception e) {
                                if(!serverSocket.isClosed()) { // ë§Œì•½ì— ì„œë²„ì†Œì¼“ì´ ë‹«í˜€ìˆì§€ ì•Šë‹¤ë©´
                                    stopServer(); // ì„œë²„ë¥¼ ì¤‘ì§€í•œë‹¤
                                }
                                break;

                            }	
                            
                            
                        }
                    }
                };	
                // startServerì˜ ë§¨ë§ˆì§€ë§‰ ì½”ë“œ
                // ìŠ¤ë ˆë“œ í’€ì˜ ìŠ¤ë ˆë“œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤
                executorService.submit(runnable);
        }
            
                
        void stopServer() { // ì„œë²„ ì¢…ë£Œ ì½”ë“œ
            // stop ë²„íŠ¼ ëˆŒë €ì„ ë•Œ ì‹¤í–‰
            try {
            // ì—°ê²°ëœ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²°ì„ ëŠê¸° ìœ„í•´ ì†Œì¼“,ìµìŠ¤íí„° ì„œë¹„ìŠ¤ í´ë¡œì¦ˆ,ë¦¬ìŠ¤í¬ ì»¬ë ‰ì…˜ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì œê±°
            Iterator<Client> iterator = connections.iterator();
            // iteratorì—ì„œ ê°€ì§€ê³  ì˜¬ í´ë¼ì´ì–¸íŠ¸ê°€ ìˆë‹¤ë©´
            while(iterator.hasNext()) {
                // í´ë¼ì´ì–¸íŠ¸ ê°€ì ¸ì˜¤ê¸°
                Client client = iterator.next();
                
                // ê°€ì§€ê³ ì˜¨ í´ë¼ì´ì–¸íŠ¸ì˜ ì†Œì¼“ í´ë¡œì¦ˆ => ì˜ˆì™¸ì²˜ë¦¬ í•´ì•¼í•œë‹¤
                client.socket.close();
                
                // í´ë¼ì´ì–¸íŠ¸ ì œê±°
                iterator.remove();
                }	
                // Socket í´ë¡œì¦ˆ
                if(serverSocket != null && !serverSocket.isClosed()) {
                    serverSocket.close();
                }
                // executor í´ë¡œì¦ˆ
                if(executorService != null && !executorService.isShutdown()) {
                    executorService.shutdown();
                }
                // ë¡œê·¸ ì¿¨ë ¥
                Platform.runLater(()->{
                    displayText("[ì„œë²„ ë©ˆì¶¤]");
                    btnStartStop.setText("start"); // ë²„íŠ¼ startë¡œ ë³€ê²½
                });
                
            } catch (Exception e) {} // ì˜ˆì™¸ì²˜ë¦¬ ë‚´ìš© ì—†ì–´ì„œ ë‚´ìš©ì‘ì„± X
                        
        }	
        
        class Client { // ë°ì´í„° í†µì‹ ì½”ë“œ
            // í•„ë“œ ì„ ì–¸
            Socket socket;
            
            // ìƒì„±ì ìƒì„± => socket ë§¤ê°œê°’ìœ¼ë¡œ ë°›ì•„ socketì— ëŒ€ì…
            Client(Socket socket){
                this.socket = socket;
                receive(); // í´ë¼ì´ì–¸íŠ¸ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ í•­ìƒ ë©”ì†Œë“œ í˜¸ì¶œ
            }
            
            // í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë°ì´í„° ë°›ëŠ” ë©”ì†Œë“œ
            void receive() {
                // ìŠ¤ë ˆë“œ í’€(executorService) ì•ˆì— ìˆëŠ” ìŠ¤ë ˆë“œê°€ receive ë©”ì†Œë“œë¥¼ ì‹¤í–‰ í•  ìˆ˜ ìˆë„ë¡
                Runnable runnable = new Runnable() {

                    @Override
                    public void run() {
                        try {
                        // í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë°ì´í„°ë¥¼ ë°›ì„ ì½”ë“œ
                        while(true) {
                            byte[] byteArr = new byte[100];
                            InputStream inputStream = socket.getInputStream();
                            
                            // inputStream ì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ë°ì´í„° ë°›ê¸°
                            int readByteCount = inputStream.read(byteArr);
                            
                            if(readByteCount == -1) { // í´ë¼ì´ì–¸íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë¥¼ í–ˆë‹¤ë©´
                                throw new IOException(); // ê°•ì œì ìœ¼ë¡œ IOì˜ˆì™¸ë¥¼ ë°œìƒ
                            }
                            
                            // ë¡œê·¸ ì¶œë ¥ë‚´ìš©
                            String message = "[ìš”ì²­ ì²˜ë¦¬ : " + socket.getRemoteSocketAddress() + ": " 
                                        + Thread.currentThread().getName() + "]";
                            // ë¡œê·¸ ì¶œë ¥
                            Platform.runLater(()-> displayText(message));
                            
                            // ì½ì€ ë°”ì´íŠ¸ ë¬¸ìì—´ë¡œ ë³€í™˜
                            String data = new String(byteArr,0,readByteCount,"UTF-8");
                            
                            // ë°›ì€ ë°ì´í„°ë¥¼ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬
                            // for : ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ë¥¼ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì–»ì–´ì„œ sendë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë°ì´í„°ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚¸ë‹¤
                            for(Client client : connections) {
                                client.send(data);
                                
                            }
                        }
                        
                        
                        }catch(Exception e) {
                            try {
                            // í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ë¥¼ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œ
                                connections.remove(Client.this);
                                
                                // ì¶œë ¥ ë¡œê·¸ ìƒì„±
                                String message = "[í´ë¼ì´ì–¸íŠ¸ í†µì‹  ì•ˆë¨ : " + socket.getRemoteSocketAddress() + ": " 
                                                + Thread.currentThread().getName() + "]"; 
                                // ë¡œê·¸ ì¶œë ¥
                                Platform.runLater(()-> displayText(message));
                        
                                socket.close();
                            } catch (IOException e1) {
                            }
                            
                        }
                        
                    }
                        
                };
                //executorService ë‚´ë¶€ì˜ ìŠ¤ë ˆë“œê°€ run() ì´ë¼ê³  í•˜ëŠ” ì‘ì—…ì„ ì‹¤í–‰í•˜ê²Œ í•œë‹¤
                executorService.submit(runnable);
                
            }
            
            // í´ë¼ì´ì–¸íŠ¸ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë©”ì†Œë“œ => ë§¤ê°œê°’ìœ¼ë¡œ ë¬¸ìì—´ì„ ë°›ì•„ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡í•œë‹¤
            void send(String data) {
                Runnable runnable = new Runnable() {

                    @Override
                    public void run() {
                        // í´ë¼ì´ì–¸íŠ¸í•œí…Œ ë°ì´í„° ë³´ë‚´ëŠ” ë©”ì†Œë“œ ì‘ì„±
                        // ë°”ì´íŠ¸ë°°ì—´ ìƒì„± => ë³´ë‚´ê³ ì í•˜ëŠ” ë§¤ê°œê°’ data ì—ì„œ ë°”ì´íŠ¸ ì–»ì–´ë‚¸ë‹¤ 
                        try {
                            byte[] byteArr = data.getBytes("UTF-8");
                            
                            // í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚´ê¸°
                            OutputStream outputStream = socket.getOutputStream();
                            // outputStreamì˜ writeë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ byteArr ì— ì €ì¥ëœ ë‚´ìš©ì„ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚¸ë‹¤
                            outputStream.write(byteArr);
                            outputStream.flush(); // writeë©”ì†Œë“œ í˜¸ì¶œí›„ ê¼­ ì‚¬ìš©í•´ì•¼í•œë‹¤
                            
                        } catch (Exception e) {
                            try {
                            // write ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ ë°œìƒì‹œ ì¶œë ¥ë¡œê·¸ ì‘ì„±
                            String message = "[í´ë¼ì´ì–¸íŠ¸ í†µì‹  ì•ˆë¨ : " + socket.getRemoteSocketAddress() + ": " 
                                            + Thread.currentThread().getName() + "]"; 
                            // í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ë¥¼ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œ
                            connections.remove(Client.this);
                            
                                socket.close();
                            } catch (IOException e1) {
                            }
                        }
                    }
                    
                };
                //executorService ë‚´ë¶€ì˜ ìŠ¤ë ˆë“œê°€ run() ì´ë¼ê³  í•˜ëŠ” ì‘ì—…ì„ ì‹¤í–‰í•˜ê²Œ í•œë‹¤
                executorService.submit(runnable);
            }

            
        }
        
        //////////////////////////////////////////////////////
        // ìë°”ë¡œ UI ë§Œë“œê²ƒ
        TextArea txtDisplay;
        Button btnStartStop;
        
        @Override
        public void start(Stage primaryStage) throws Exception {
            BorderPane root = new BorderPane();
            root.setPrefSize(500, 300);
            
            txtDisplay = new TextArea();
            txtDisplay.setEditable(false);
            BorderPane.setMargin(txtDisplay, new Insets(0,0,2,0));
            root.setCenter(txtDisplay);
            
            btnStartStop = new Button("start");
            btnStartStop.setPrefHeight(30);
            btnStartStop.setMaxWidth(Double.MAX_VALUE);
            btnStartStop.setOnAction(e->{
                if(btnStartStop.getText().equals("start")) {
                    startServer();
                } else if(btnStartStop.getText().equals("stop")){
                    stopServer();
                }
            });
            root.setBottom(btnStartStop);
            
            Scene scene = new Scene(root);
            scene.getStylesheets().add(getClass().getResource("app.css").toString());
            primaryStage.setScene(scene);
            primaryStage.setTitle("Server");
            primaryStage.setOnCloseRequest(event->stopServer());
            primaryStage.show();
        }
        
        void displayText(String text) {
            txtDisplay.appendText(text + "\n");
        }	
        
        public static void main(String[] args) {
            launch(args);
        }
    }
    ```

- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ

    ```java
    package sec07.exam03_chatting;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.io.UnsupportedEncodingException;
    import java.net.InetSocketAddress;
    import java.net.Socket;

    import javafx.application.Application;
    import javafx.application.Platform;
    import javafx.geometry.Insets;
    import javafx.scene.Scene;
    import javafx.scene.control.Button;
    import javafx.scene.control.TextArea;
    import javafx.scene.control.TextField;
    import javafx.scene.layout.BorderPane;
    import javafx.stage.Stage;

    public class ClientExample extends Application {
        // í†µì‹ ê³¼ ê´€ë ¨ëœ í•„ë“œ
        Socket socket;
        
        void startClient() { // ì—°ê²° ì‹œì‘ ì½”ë“œ
            
            // ì„œë²„ì— ì—°ê²°ë˜ê¸° ì „ê¹Œì§€ ëŒ€ê¸°ìƒíƒœë¡œ ìˆê¸°ìœ„í•´ ë³„ë„ì˜ Threadìƒì„± => ìµëª…ê°ì²´ë¡œ ìƒì„±
            Thread thread = new Thread() {
                @Override
                public void run() {
                    try {
                        // socket ê°ì²´ ìƒì„±
                        socket = new Socket();
                        
                        // ì—°ê²°				
                        socket.connect(new InetSocketAddress("localhost", 5001));
                        
                        // ë¡œê·¸ ì¶œë ¥
                        Platform.runLater(()->{
                            displayText("[ì—°ê²° ì™„ë£Œ: " + socket.getRemoteSocketAddress() + "]");
                            btnConn.setText("stop"); // startë²„íŠ¼ stopë¡œ ë³€ê²½
                            btnSend.setDisable(false); // sendë²„íŠ¼ í™œì„±í™”
                        });
                    } catch (IOException e) { 
                        Platform.runLater(()->displayText("[ì„œë²„ í†µì‹  ì•ˆë¨]"));
                        if(!socket.isClosed()) {
                            stopClient();
                        }return;
                        
                        }
                    // ì—°ê²° ì„±ê³µì‹œ => receive ë©”ì†Œë“œë¥¼ ë°›ì•„ í•­ìƒ ì„œë²„ê°€ ë³´ë‚´ëŠ” ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤
                        receive();
                    }
                };		
                thread.start(); // thread ì‹œì‘
        }
        
        void stopClient() { // ì—°ê²° ëŠê¸° ì½”ë“œ
            try {
            Platform.runLater(()->{displayText("[ì—°ê²° ëŠìŒ]");
            btnConn.setText("start"); // stopë²„íŠ¼ startë¡œ ë³€ê²½
            btnSend.setDisable(true); // sendë²„íŠ¼ ë¹„í™œì„±í™”	
            });
            if(socket !=null && !socket.isClosed()) {
                socket.close();
            }
            }catch(Exception e) {}
        }
        
        void receive() { // ë°ì´í„° ë°›ê¸° ì½”ë“œ
            while(true) {
                try {
                byte[] byteArr = new byte[100];
                InputStream inputStream = socket.getInputStream();
                
                int readByteCount = inputStream.read(byteArr);
                
                if(readByteCount == -1) { // í´ë¼ì´ì–¸íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë¥¼ í–ˆë‹¤ë©´
                    throw new IOException(); // ê°•ì œì ìœ¼ë¡œ IOì˜ˆì™¸ë¥¼ ë°œìƒ
                }
                
                // ì½ì€ ë°”ì´íŠ¸ ë¬¸ìì—´ë¡œ ë³€í™˜
                String data = new String(byteArr,0,readByteCount,"UTF-8");
                
                // ë¡œê·¸ ì¶œë ¥
                Platform.runLater(()-> displayText("[ë°›ê¸° ì™„ë£Œ]" + data));
                
                } catch(Exception e) {
                    Platform.runLater(()-> displayText("[ì„œë²„ í†µì‹  ì•ˆë¨]"));
                    
                    stopClient();
                    break; // whileë¬¸ ë¹ ì ¸ë‚˜ê°€ê¸°
                }

            }
            
        }
        
        void send(String data) { // ë°ì´í„° ì „ì†¡ ì½”ë“œ
            
            // ë³„ë„ì˜ ìŠ¤ë ˆë“œ ë§Œë“¤ì–´ ë°ì´í„° ë³´ë‚´ê¸°
            
            Thread thread = new Thread() {
                @Override
                public void run() {
                    try {
                        byte[] byteArr = data.getBytes("UTF-8");
                        OutputStream outputStream = socket.getOutputStream();
                        outputStream.write(byteArr);
                        outputStream.flush(); // writeë©”ì†Œë“œ í˜¸ì¶œí›„ ê¼­ ì‚¬ìš©í•´ì•¼í•œë‹¤
                        Platform.runLater(()-> displayText("[ë³´ë‚´ê¸° ì™„ë£Œ]"));
                    } catch (Exception e) {
                        Platform.runLater(()-> displayText("[ì„œë²„ í†µì‹  ì•ˆë¨]"));
                        stopClient();
                    }
                }
            };
            thread.start(); // thread ì‹œì‘
        }
        
        //////////////////////////////////////////////////////
        
        // ìë°” UI
        
        TextArea txtDisplay;
        TextField txtInput;
        Button btnConn, btnSend;
        
        @Override
        public void start(Stage primaryStage) throws Exception {
            BorderPane root = new BorderPane();
            root.setPrefSize(500, 300);
            
            txtDisplay = new TextArea();
            txtDisplay.setEditable(false);
            BorderPane.setMargin(txtDisplay, new Insets(0,0,2,0));
            root.setCenter(txtDisplay);
            
            BorderPane bottom = new BorderPane();
                txtInput = new TextField();
                txtInput.setPrefSize(60, 30);
                BorderPane.setMargin(txtInput, new Insets(0,1,1,1));
                
                btnConn = new Button("start");
                btnConn.setPrefSize(60, 30);
                btnConn.setOnAction(e->{
                    if(btnConn.getText().equals("start")) {
                        startClient();
                    } else if(btnConn.getText().equals("stop")){
                        stopClient();
                    }
                });
                
                btnSend = new Button("send"); 
                btnSend.setPrefSize(60, 30);
                btnSend.setDisable(true);
                btnSend.setOnAction(e->send(txtInput.getText()));
                
                bottom.setCenter(txtInput);
                bottom.setLeft(btnConn);
                bottom.setRight(btnSend);
            root.setBottom(bottom);
            
            Scene scene = new Scene(root);
            scene.getStylesheets().add(getClass().getResource("app.css").toString());
            primaryStage.setScene(scene);
            primaryStage.setTitle("Client");
            primaryStage.setOnCloseRequest(event->stopClient());
            primaryStage.show();
        }
        
        void displayText(String text) {
            txtDisplay.appendText(text + "\n");
        }	
        
        public static void main(String[] args) {
            launch(args);
        }
    }
    ```
â–¶ ì„œë²„ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¶œë ¥
![server_1](https://user-images.githubusercontent.com/65608960/110485323-da8bb600-812e-11eb-8dc9-ed8fb8b64a9c.JPG)

â–¶ ì„œë²„ì‹¤í–‰ ì¶œë ¥
![server_2](https://user-images.githubusercontent.com/65608960/110485321-d9f31f80-812e-11eb-9f6d-86b6f3bf4914.JPG)

â–¶ í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰ ì¶œë ¥
![client_1](https://user-images.githubusercontent.com/65608960/110485319-d9f31f80-812e-11eb-86f4-cf03fd2c7e34.JPG)

â–¶ í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì¶œë ¥
![ì—°ê²°](https://user-images.githubusercontent.com/65608960/110485317-d95a8900-812e-11eb-8575-7200a467acef.JPG)

â–¶ í´ë¼ì´ì–¸íŠ¸2 ì—°ê²° ì¶œë ¥
![ì—°ê²°2](https://user-images.githubusercontent.com/65608960/110485316-d95a8900-812e-11eb-99ba-754b6c901cc9.JPG)

â–¶ í´ë¼ì´ì–¸íŠ¸ ëŒ€í™” ì¶œë ¥
![send1](https://user-images.githubusercontent.com/65608960/110485313-d8c1f280-812e-11eb-98d7-99e6f0d00b66.JPG)
![send2](https://user-images.githubusercontent.com/65608960/110485306-d790c580-812e-11eb-8cc6-3843002ec458.JPG)

â–¶ í´ë¼ì´ì–¸íŠ¸ ì¤‘ì§€ ì¶œë ¥
![stop](https://user-images.githubusercontent.com/65608960/110485326-db244c80-812e-11eb-9744-bdb4d17139dd.JPG)

â–¶ ì„œë²„ ì¤‘ì§€ ì¶œë ¥
![serverStop](https://user-images.githubusercontent.com/65608960/110485325-da8bb600-812e-11eb-85cb-130eb89d1458.JPG)

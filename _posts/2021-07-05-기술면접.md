---
layout: post
title: '기술면접 - Cookie와 Session'
date: 2021-07-05
category: [기술면접]
comments: true
---

# 기술면접 - Cookie와 Session

### 🎈 Cookie와 Session 사용 목적

    - HTTP 통신의 특징인 Stateless때문에 서버는 클라이언트의 상태를 알지 못한다
    * stateless : 클라이언트와 서버가 연결을 성공한 후,
                  클라이언트의 요청에 대해 서버가 응답을 하고 나면 연결을 끊어버리는 것
     => 따라서 서버는 클라이언트의 정보를 계속해서 확인해야 한다
     => 클라이언트의 정보를 유지하기 위해 매번 연결을 해야 하는 번거로움이 있다
    💡 이를 해결하기 위해 Cookie와 Session으로 클라이언트의 정보를 저장한다

#### 🔹 Cookie

    - 사용자의 디스크나 웹 브라우저 메모리에 저장된다.
    - 클라이언트 측에 "key와 value"형태의 text 타입으로 데이터가 저장된다
    - 데이터의 크기에 제한이 있다.

#### 🔸 Cookie 프로세스

    1. 브라우저에서 웹 페이지 접속
    2. 웹 서버에서 쿠키를 생성
    3. 생성한 쿠키에 데이터를 담아 요청에 응답할 때 클라이언트에게 함께 전송
    4. 클라이언트가 보관하다가 서버에 재요청할 때 쿠키를 함께 전송
    5. 클라이언트와 서버가 로그인 정보가 유지되어있는 것처럼 사용

- 쿠키 사용법(JAVA)

  ```java
  //쿠키 생성
  Cookie cookie = new Cookie(name, value); //String, String
  cookie.setMaxAge(1000000);

  //쿠키 발행
  response.addCookie(cookie);

   * 참고 : 쿠키 저장기간 -> 쿠키 유효시간 설정
  // setMaxAge(int sec); //쿠키의 유효기간을 설정한다.

  //sec의 값에 따라 쿠키의 유효기간이 정해진다.
  // 음수(-1)	: 메모리에만 저장. 브라우저가 종료되면 사라진다.(일시적인 변수로 저장)
  // 0	    : 기존에 발행한 쿠키를 삭제한다.
  // 양수		: 지정한 초만큼 쿠키를 유지한다.
  //    	   단, 지정한 시간 전에 브라우저 종료 시 파일 형태로 저장됨.
  ```

##### 🔹 Session

    - 웹 서비스를 위한 사용자의 정보를 서버측에 저장한다.
    - 서버 측에 객체 타입으로 저장된다
    - 클라이언트가 서버에 재 요청 시 쿠키(JSESSIONID)를 이용하여 세션ID 값을 서버에 전달

#### 🔸 Session 프로세스

    1. 클라이언트가 서버에 접속 시 세션 ID를 발급
    2. 클라이언트는 쿠키(쿠키이름 : JSESSIONID)를 이용해 세션 ID를 저장해서 가지고 있음
    3. 생성한 쿠키에 데이터를 담아 요청에 응답할 때 클라이언트에게 함께 전송

- 세션 사용법(JAVA)

  ```java
  //세션 생성
  HttpSession session = request.getSession();

  //세션에 데이터 저장
  session.setAttribute("name", value);

  * 참고 : 세션 저장기간 -> session.invalidate() 혹은 웹 브라우저가 종료될 때까지 데이터가 유지된다.
  // session.invalidate() : 세션 무효화 => 삭제 X , 사용자가 요청을 또 보내면 모든 정보가 그대로 남아있다

  ```

### 🎈 Cookie와 Session 차이점

    - 쿠키와 세션의 역할은 비슷하다. 가장 큰 차이점은 사용자의 정보가 저장되는 위치이다.
    - 보안 면에서는 세션이 더 우수하고, 세션의 경우 서버의 처리가 필요하기 때문에 요청 속도는 쿠키가 더 빠르다.

⭐ [참고 블로그](https://beforb.tistory.com/7)

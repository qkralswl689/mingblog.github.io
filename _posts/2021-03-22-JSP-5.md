---
layout: post
title: "JSP - JSP 2.3 & Servlet3.1 - response, pageContext,session   "
date: 2021-03-22
category : [JSP]
comments: true
---

## ğŸ”· JSP 2.3 & Servlet3.1 - response, pageContext,session  

âœ”  respones ê°ì²´

    - í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì— ëŒ€í•œ HTTP ì‘ë‹µì„ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´

ğŸ’¡ response ê°ì²´ì˜ ì£¼ìš” ë©”ì†Œë“œë“¤
![resp](https://user-images.githubusercontent.com/65608960/112094143-0eaab080-8bde-11eb-833f-b18b41279f70.JPG)

ğŸ–‹ response ì˜ˆì œ)

- í™”ë©´ìƒì„± ë° ì•¡ì…˜ ì—°ê²° ì½”ë“œ
    ```js
    <%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
    <meta charset="UTF-8">
    <title>response ê°ì²´</title>
    </head>
    <body>
    JSP í™˜ê²½ ì„¤ì •ì„ ìœ„í•œ ë‹¤ìš´ë¡œë“œ í˜ì´ì§€ ì…ë‹ˆë‹¤.
    /* response2ì•¡ì…˜ ìƒìš©, getë°©ì‹ ì´ìš© */
    <form action="response2.jsp" method="get">
    /* select ì´ë¦„ : downLoad */
    <select name="download">
        <%-- selectí˜•ì‹ ì˜µì…˜ ì‚¬ìš© */
        <option selected value="1">JDK</option>
        <option value="2">Tomcat</option>
        <option value="3">eclipes</option>
        <option vlaue="4">oracle</option>
    </select>
    /* submit íƒ€ì… ë²„íŠ¼ ìƒì„±, ë²„íŠ¼ ì´ë¦„ : ì´ë™ */
    <input type="submit" value="ì´ë™">
    </form>
    </body>
    </html>
    ```
â–¶ ì¶œë ¥ê²°ê³¼
![resp1](https://user-images.githubusercontent.com/65608960/112096417-90e8a400-8be1-11eb-80ec-3aedb887d8df.png)

- ì•¡ì…˜ ì½”ë“œ
    ```js
    <%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
    <meta charset="UTF-8">
    <title>response ê°ì²´ </title>
    </head>
    <body>
    <%
    /* // Stringíƒ€ì… ë³€ìˆ˜ strsite ì„ ì–¸í›„ download íŒŒë¼ë¯¸í„° ëŒ€ì… */
    String strSite=request.getParameter("download");

    switch(strSite)
    /* 1 ì„ íƒì‹œ  http://java.sun.com ë¡œ ì´ë™
    response.sendRedirect ì™€ ë™ì¼í•˜ë‹¤ */
    { case "1" : 
        out.print("<script>" +"location.href='http://java.sun.com'"+	
                "</script>" );
        break;
        /*  2ì„ íƒì‹œ ë°”ë¡œ "http://tomcat.apache.org" í˜ì´ì§€ë¡œ ì´ë™ */
    case "2" :
        response.sendRedirect("http://tomcat.apache.org");
        break;
        /*  3ì„ íƒì‹œ ë°”ë¡œ "http://www.eclipse.org" í˜ì´ì§€ë¡œ ì´ë™ */
    case "3":
        response.sendRedirect("http://www.eclipse.org");
        break;
        /*  ê¸°ë³¸ "http://www.oracle.com" í˜ì´ì§€ë¡œ ì´ë™ */
    default:
        response.sendRedirect("http://www.oracle.com");
        break;
    }
    %>
    </body>
    </html>
    ```
â–¶ ì¶œë ¥ê²°ê³¼ (JDK ì„ íƒì‹œ)
![resp1-1](https://user-images.githubusercontent.com/65608960/112096413-90500d80-8be1-11eb-892e-3f3063b12721.JPG)

âœ”  pageContext ê°ì²´

    - ë‹¤ë¥¸ ë‚´ì¥ ê°ì²´ë¥¼ ì–»ì–´ë‚´ê±°ë‚˜ í˜„ì¬ í˜ì´ì§€ì˜ ìš”ì²­,ì‘ë‹µì˜ ì œì–´ê¶Œì„ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ë„˜ê²¨ì£¼ëŠ” ê°ì²´
    - ë‚´ì¥ ê°ì²´ì˜ ì†ì„±ì„ ì œì–´í•œë‹¤

ğŸ’¡ pageContext ê°ì²´ì˜ ì£¼ìš” ë©”ì†Œë“œë“¤
![pagecontext](https://user-images.githubusercontent.com/65608960/112099057-2dad4080-8be6-11eb-9b76-750555a20274.JPG)

ğŸ–‹ pageContext ì˜ˆì œ)

- getOut í™œìš©
    ```js
    <%@ page language="java" contentType="text/html; charset=UTF-8" %>
    <!DOCTYPE HTML>
    <HTML lang="ko">
    <HEAD>
    <TITLE> pageContext ê°ì²´ </TITLE>
    </HEAD>
    <BODY>

    <% 
    // out. / getOut() : ê²°ê³¼ê°€ ê°™ë‹¤
    out.println("íšŒì›ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.<BR>");
    pageContext.getOut().print("ë§ˆì¼ë¦¬ì§€ë¥¼ ë“œë¦½ë‹ˆë‹¤<br>");
    pageContext.getOut().println("ë§ˆì¼ë¦¬ì§€ 100ì ì´ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.<BR>");
    out.println("ì €í¬ ì‚¬ì´íŠ¸ë¥¼ ì• ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.");
    %>

    </BODY>
    </HTML>
    ```
â–¶ ì¶œë ¥ê²°ê³¼ 
![pagecontext1](https://user-images.githubusercontent.com/65608960/112100513-94335e00-8be8-11eb-94e4-45e37e22f794.JPG)

- include,flush í™œìš©
    ```js
    <%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
    <meta charset="UTF-8">
    <title>pageContext ê°ì²´</title>
    </head>
    <body>
    <%
    out.print("íšŒì›ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.<br>");
    out.flush(); // ì¶œë ¥ë²„í¼ ë‚´ìš©ì„ ë¹„ìš´ë‹¤

    // include : ì„ì‹œì ìœ¼ë¡œ ì§€ì •ëœ í˜ì´ì§€ë¡œ ì œì–´ê¶Œì„ ë„˜ê¸´ë‹¤, ì œì–´ì²˜ë¦¬ê°€ ê¸‘ë‚˜ë©´ ì›ë˜ í˜ì´ì§€ë¡œ ì œì–´ê¶Œì´ ë„˜ì–´ì˜¨ë‹¤
    pageContext.include("pageContext3.jsp");
    out.println("ì €í¬ ì‚¬ì´íŠ¸ë¥¼ ì• ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.");

    %>

    </body>
    </html>
    ```
- pageContext3 ì½”ë“œ
    ```js
    <%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
    <meta charset="UTF-8">
    <title>pageContext ê°ì²´</title>
    </head>
    <body>
    <% 
    out.println("ë§ˆì¼ë¦¬ì§€ 100ì ì„ ì§€ê¸‰í•´ ë“œë¦½ë‹ˆë‹¤.(pageContext3)<BR>");
    out.flush();
    %>
    </body>
    </html>
    ```
â–¶ ì¶œë ¥ê²°ê³¼ 
![pagecontext2](https://user-images.githubusercontent.com/65608960/112100515-94cbf480-8be8-11eb-8195-fa30f55bfed8.JPG)

- setAttribute, getAttribute ì‚¬ìš© (null ì•„ë‹ê²½ìš°)
    ```js
    <%@ page language="java" contentType="text/html; charset=UTF-8" %>
    <!DOCTYPE HTML>
    <HTML lang="ko">
    <HEAD>
    <TITLE> pageContext ê°ì²´ </TITLE>
    </HEAD>
    <BODY>

    <%
    // setAttribute(String name, Object value) : ì´ë¦„ì´ nameì¸ ì†ì„±ì˜ ê°’ì„ valueë¡œ ì§€ì •í•œë‹¤
    // setAttribute("pageValue","pageContext Example") : ì´ë¦„ì´ pageValueì¸ ì†ì„±ì˜ ê°’ì„ pageContext Exampleë¡œ ì§€ì •í•œë‹¤
    pageContext.setAttribute("pageValue","pageContext Example");
    Object code=pageContext.getAttribute("pageValue");

    // codeê°€nullì´ ì•„ë‹ˆë¼ë©´
    if (code != null){
            /*ì½ì–´ë“œë¦° ì†ì„±ì€ objectì´ë¯€ë¡œ í˜•ë³€í™˜ì„ í•´ì•¼í•œë‹¤ : (String)code : ë¬¸ìì—´ë¡œ í˜•ë³€í™˜  */
            // codeë¥¼ Stringìœ¼ë¡œ í˜•ë³€í™˜í•˜ì—¬ ë¬¸ìì—´ë³€ì„œ strValueì— ì €ì¥í•œë‹¤
            String strValue=(String)code;
            // strValueë¥¼ ì¶œë ¥í•œë‹¤
            out.println("page Value=" + strValue + "<BR>");
    }
    else{ // null ì´ë¼ë©´
            // ì¶œë ¥í•œë‹¤
            out.println("Not found!!");
    }
    %>

    </BODY>
    </HTML>
    ```

â–¶ ì¶œë ¥ê²°ê³¼ 
![pagecontext3](https://user-images.githubusercontent.com/65608960/112101699-6e0ebd80-8bea-11eb-91d7-6151c58aa368.JPG)


- setAttribute, getAttribute ì‚¬ìš© (null ì¼ê²½ìš°)
    ```js
    <%@ page language="java" contentType="text/html; charset=UTF-8" %>
    <!DOCTYPE HTML>
    <HTML lang="ko">
    <HEAD>
    <TITLE> pageContext ê°ì²´ </TITLE>
    </HEAD>
    <BODY>

    <%
    // setAttribute(String name, Object value) : ì´ë¦„ì´ nameì¸ ì†ì„±ì˜ ê°’ì„ valueë¡œ ì§€ì •í•œë‹¤
    // setAttribute("pageValue","pageContext Example") : ì´ë¦„ì´ pageValueì¸ ì†ì„±ì˜ ê°’ì„ pageContext Exampleë¡œ ì§€ì •í•œë‹¤
    pageContext.setAttribute("pageValue",null);
    Object code=pageContext.getAttribute("pageValue");

    // codeê°€nullì´ ì•„ë‹ˆë¼ë©´
    if (code != null){
            /*ì½ì–´ë“œë¦° ì†ì„±ì€ objectì´ë¯€ë¡œ í˜•ë³€í™˜ì„ í•´ì•¼í•œë‹¤ : (String)code : ë¬¸ìì—´ë¡œ í˜•ë³€í™˜  */
            // codeë¥¼ Stringìœ¼ë¡œ í˜•ë³€í™˜í•˜ì—¬ ë¬¸ìì—´ë³€ì„œ strValueì— ì €ì¥í•œë‹¤
            String strValue=(String)code;
            // strValueë¥¼ ì¶œë ¥í•œë‹¤
            out.println("page Value=" + strValue + "<BR>");
    }
    else{ // null ì´ë¼ë©´
            // ì¶œë ¥í•œë‹¤
            out.println("Not found!!");
    }
    %>

    </BODY>
    </HTML>
    ```
â–¶ ì¶œë ¥ê²°ê³¼ 
![pagecontext3-1](https://user-images.githubusercontent.com/65608960/112101697-6d762700-8bea-11eb-98c1-f94c456aa5b4.JPG)


âœ” session ê°ì²´

    - ì„œë²„ì˜ ì—°ê²°ì´ ëŠì–´ì ¸ë„ ê°€ìƒ ì—°ê²°ì„ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì˜ ì •ë³´ë¥¼ ìœ ì§€í•˜ë„ë¡ í•˜ëŠ” ê°ì²´

ğŸ’¡ session ê°ì²´ì˜ ì£¼ìš” ë©”ì†Œë“œë“¤
![session](https://user-images.githubusercontent.com/65608960/112101855-b4641c80-8bea-11eb-96f1-8335efc5f698.JPG)


ğŸ–‹ session ì˜ˆì œ)

- ì„¸ì…˜ ëª¨ì–‘ ì½”ë“œ
    ```js
    <%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
    <meta charset="UTF-8">
    <title>session ê°ì²´</title>
    </head>
    <body>
    // session.invalidate() : ì„¸ì…˜ ì´ˆê¸°í™” 
    <% session.invalidate(); %>
    // session2ì˜ ì•¡ì…˜ ì‚¬ìš©, post ë©”ì†Œë“œ ì‚¬ìš© 
    <FORM action="session2.jsp" Method="post">

    ì•„ì´ë””   : <input type="text" name="strId"> <BR>
    ë¹„ë°€ë²ˆí˜¸ : <input type="password" name="strPwd"> <BR><BR>

    <input type="submit" Value="ë¡œê·¸ì¸">
    <input type="reset" Value="ì·¨ì†Œ">
    </Form>
    </body>
    </html>
    ```

- ì„¸ì…˜ ì„¤ì •ì½”ë“œ
    ```js
    <%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
    <meta charset="UTF-8">
    <title>session ê°ì²´</title>
    </head>
    <body>
    <%
    // ë¬¸ìì—´ ë³€ìˆ˜ Id ì„ ì–¸í›„ strIDë¥¼ íŒŒë¼ë¯¸í„° ì¸ìë¡œ ë°›ëŠ”ë‹¤
    String Id = request.getParameter("strId");
    // ì„¸ì…˜ì— ì €ì¥ëœ ìë£ŒëŠ” ë‹¤ì‹œ getAttribute()ë©”ì„œë“œë¥¼ ì´ìš©í•´ ì¡°íšŒí•œë‹¤
    // ì„¸ì…˜ì— ì €ì¥ëœ idë¥¼ ì¡°íšŒí•´ì„œ ê·¸ ê°’ì´ nullì´ë¼ë©´
    if (session.getAttribute("sessId") == null){
        // ì„¸ì…˜ì˜ idë¥¼ ìœ„ì—ì„œ ì „ë‹¬ë°›ì€ ì¸ìê°’ : ë³€ìˆ˜Id ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤
        session.setAttribute("sessId", Id);
    }
    //ì„¸ì…˜ ìœ ì§€ì‹œê°„ì€ 5ì´ˆë¡œ ì„¤ì •
    session.setMaxInactiveInterval(5);

    // ë¬¸ìì—´ ë³€ìˆ˜ sessIdì„ ì–¸í›„ ì„¸ì…˜ì—ì„œ ë°›ì€ sessIdê°’ì„ ë¬¸ìí˜•ìœ¼ë¡œ í˜•ë³€í™˜í•˜ì—¬ í• ë‹¹í•œë‹¤
    String sessId=(String)session.getAttribute("sessId");

    // ë¬¸ìì—´ ë³€ìˆ˜ strSessionId ì„ ì–¸í›„ ì„¸ì…˜ì—ì„œ ì–»ì€ Idê°’ì„ í• ë‹¹í•œë‹¤
    String strSessionId = session.getId();
    // ì •ìˆ˜í˜• ë³€ìˆ˜ intTimeì„ ì–¸ í›„ ì„¸ì…˜ìœ ì§€ì‹œê°„ì„ í• ë‹¹í•œë‹¤
    int intTime=session.getMaxInactiveInterval();
    %>
    // sessIdê°’ ì¶œë ¥ 
    <B> <%=sessId %> ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤. </B> <P> 
    ì„¸ì…˜ ID : <%=strSessionId %> <BR>
    ì„¸ì…˜ ì‹œê°„ : <%=intTime %>

    </body>
    </html>
    ```
â–¶ ì¶œë ¥ê²°ê³¼ 
![session1](https://user-images.githubusercontent.com/65608960/112121584-bf2aab80-8c02-11eb-8735-f142bb655268.JPG)

â–¶ ì¶œë ¥ê²°ê³¼ 
![session1-1](https://user-images.githubusercontent.com/65608960/112121581-be921500-8c02-11eb-8a3b-2bdde6c3a4af.JPG)

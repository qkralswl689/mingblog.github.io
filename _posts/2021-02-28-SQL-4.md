---
layout: post
title: "DB -SQL - sqlì „ë¬¸ê°€ ì •ë¯¸ë‚˜ - ì˜¤ë¼í´ ì´ˆê¸‰ê°•ì˜ : JOIN ì¿¼ë¦¬(OUTER JOIN)"
date: 2021-02-28
category : [DB]
comments: true
---

## ğŸ”·ì‹¤ìŠµ

### âœ” OUTER JOIN

- OUTER JOIN : ì¡°ì¸ëœ ë‘ í…Œì´í”Œì—ì„œ ë‘˜ì¤‘ í•œìª½ í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ LEFT ë˜ëŠ” RIGHT JOINì„ í•  ê²½ìš°,
ê·¸ ê¸°ì¤€ì´ ë˜ëŠ” í…Œì´ë¸”ì˜ ëª¨ë“  ë ˆì½”ë“œë¥¼ ì¶œë ¥í•˜ê²Œ ëœë‹¤
![OUTER](https://user-images.githubusercontent.com/65608960/109418823-a49f5100-7a0d-11eb-91a6-88b3d8bbaa22.JPG)

- ì½”ë“œ
    ```sql

    SELECT * FROM idol_group A, idol_member B 
    --  (+) ì‚¬ìš© : ì•„ì´ëŒ ê·¸ë£¹ í…Œì´ë¸” ê¸°ì¤€ìœ¼ë¡œ ì•„ì´ëŒ ë©¤ë²„í…Œì´ë¸”ì„ ì•„ìš°í„° ì¡°ì¸ 
    WHERE a.group_name = b.group_name(+);

    -- A í…Œì´ë¸”ì„(idol_group) ê¸°ì¤€ìœ¼ë¡œ B í…Œì´ë¸”(idol_member)ì˜ ì¡°ê±´ì„ ì¡°ì¸í•œë‹¤
    SELECT * FROM idol_group A 
    LEFT OUTER JOIN idol_member B 
    -- JOINì¡°ê±´ì€ ON ì ˆì— ë¶™íŒë‹¤
    ON a.group_name = b.group_namE;
    ```
ğŸˆ ë¬¸ë²• ì„¤ë¨•
![OUTERë¬¸ë²•](https://user-images.githubusercontent.com/65608960/109418821-a36e2400-7a0d-11eb-9cdf-8410d19a7fda.JPG)
![OUTERë¬¸ë²•2](https://user-images.githubusercontent.com/65608960/109418824-a49f5100-7a0d-11eb-9594-a373364437d5.JPG)
ğŸ’¡ ì¶œì²˜ : https://blog.naver.com/regenesis90

### âœ” UPDATE ì¿¼ë¦¬
- ì½”ë“œ
    ```sql
    -- SET ë’¤ì— ë³€ê²½í•˜ê³ ì‹¶ì€ ì»¬ëŸ¼ëª…ì„ ì‘ì„± í›„ ë„£ì„ ë°ì´í„° ì…ë ¥
    UPDATE idol_member SET real_name='ì¡°ë¯¸ì—°' 
    -- WHEREì ˆì—ì„œ ì–´ë–¤ ë¡œìš°ì˜ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸ í• ì§€ ì •ì˜
    -- WHEREì ˆì—ì„œ ì •ì˜í•˜ì§€ ì•Šì„ê²½ìš° í…Œì´ë¸”ì˜ ëª¨ë“  ë°ì´í„°ê°€ ì—…ë°ì´íŠ¸ ëœë‹¤ 
    -- => ì´ëŸ´ê²½ìš° ROLLBACK ì‚¬ìš© : ì—…ë°ì´íŠ¸ ë‚´ìš© ë˜ëŒë¦¬ëŠ” ëª…ë ¹ì–´ => ì´ë¯¸ ì—…ë°ì´íŠ¸ ëœ í›„ ëª…ë°œê²¬í•˜ì˜€ì„ ê²½ìš° 
    WHERE member_name='ë¯¸ì—°';
    
    -- ê°™ì€ ë¡œìš°ì— í•œê°€ì§€ ì´ìƒ ë‚´ìš©ì„ ì¶”ê°€í•˜ê³  ì‹¶ì„ë•Œ ,ë’¤ì— ì¶”ê°€ë¡œ ì—…ë°ì´íŠ¸ í•˜ê³ ì‹¶ì€ ì»¬ëŸ¼ëª… ì¶”ê°€
    UPDATE idol_member SET real_name='ì˜ˆìŠˆí™”',sns_info = 'V LIVE,ì¸ìŠ¤íƒ€ê·¸ë¨'
    WHERE member_name='ìˆ˜í™”';

    -- ì—…ë°ì´íŠ¸ ë¬¸(DMLë¬¸- UPDATE,DELETE,INSERT,SELECT)ì€ ì»¤ë°‹ì„ ê¼­ í•´ì¤˜ì•¼í•œë‹¤
    -- COMMITì„ ì•ˆí•´ì£¼ë©´ ë‹¤ë¥¸ì„¸ì…˜ì—ì„œ ë“¤ì–´ì˜¤ë©´ ì—…ë°ì´íŠ¸ê°€ ë°˜ì˜ë˜ì–´ìˆì§€ ì•Šë‹¤
    -- COMMIT : ì˜êµ¬ì  ì €ì¥
    COMMIT;
    ```

### âœ”  DELETE, TRUNCATE

- ì½”ë“œ
    ```sql
    --  AS SELECT * FROM í…Œì´ë¸”ëª…: í…Œì´ë¸” ë³µì‚¬ => í…Œì´ë¸”ì˜ ì†ì„±ì€ ì œì™¸í•˜ê³  í…Œì´ë¸”ì˜ êµ¬ì¡°ì™€ ë°ì´í„°ë“¤ë§Œ ë³µì‚¬ëœë‹¤
    CREATE TABLE IDOL_GROUP_COPY AS SELECT * FROM idol_group;

    -- ë‚´ìš© ì œì™¸í•œ í…Œì´ë¸” êµ¬ì¡°ë§Œ ë³µì‚¬ í•˜ê¸°
    -- 1=2 : ì¡°ê±´ì´ ë¬´ì¡°ê±´ ê±°ì§“ì´ ë˜ê¸°ë•Œë¬¸ì— êµ¬ì¡°ë§Œ ë³µì‚¬ëœë‹¤
    -- ì¹´í”¼í•˜ê³ ì‹¶ì€ ë°ì´í„°ë§Œ ì¹´í”¼í• ë•Œì—ëŠ” WHEREì ˆì— ì •ì˜í•œë‹¤
    CREATE TABLE IDOL_GROUP_COPY AS SELECT * FROM idol_group WHERE 1=2;

    -- DELETE : í•´ë‹¹í…Œì´ë¸”ì˜ ë°ì´í„° ëª¨ë‘ ì‚­ì œ => êµ¬ì¡°ëŠ” ë‚¨ì•„ìˆìŒ
    DELETE FROM IDOL_GROUP_COPY;

    -- ROLLBACK : ë‹¤ì‹œ ë˜ëŒë¦¬ê¸°
    ROLLBACK;

    -- ì‚­ì œí•˜ê³ ì‹¶ì€ ë°ì´í„° ì„ íƒí•˜ì—¬ ì‚­ì œ => WHEREì ˆì— ì •ì˜
    DELETE FROM IDOL_GROUP_COPY
    WHERE group_name='Wanna One';

    -- ì‚­ì œí•˜ê³ ì‹¶ì€ ë°ì´í„° ë‹¤ì¤‘ ì„ íƒí•˜ì—¬ ì‚­ì œ
    DELETE FROM IDOL_GROUP_COPY
    -- ì¡°ê±´ ì—¬ëŸ¬ê°œ ì •ì˜ (SMì´ë©´ì„œ BOYê·¸ë£¹ì¸ ë°ì´í„° ì‚­ì œ)
    WHERE company='SM ì—”í„°í…Œì¸ë¨¼íŠ¸'AND GENDER='boy';

    -- TRUNCATE : ë¡œê·¸ë¥¼ ìŒ“ì§€ì•Šê³  ë°”ë¡œ ì‚­ì œ => ë¡¤ë°± ì•ˆëœë‹¤
    TRUNCATE TABLE IDOL_GROUP_COPY;        
    ```


### âœ” NULL í•¨ìˆ˜ : NVL, NULLIF, COALESCE
- ì½”ë“œ

    ```sql    
    SELECT member_name,real_name ,
    -- NVL : ë°ì´í„°ì˜ ê°’ì´ NULLì´ë©´ ëŒ€ì²´ ê°’ì„ ì£¼ê³  ì¶œë ¥í•˜ë¼ëŠ” í•¨ìˆ˜
    -- real_nameê°’ì´ NULLì´ë©´ MEMBER_NAME ê°’ì„ ì¶œë ¥í•´ë¼
    -- NAME1 : ì¶œë ¥í•œ ê°’ì˜ ë³„ì¹­ 
    NVL(real_name,MEMBER_NAME)NAME1,

    -- NULLIF : ì™¼ìª½ê°’ê³¼ ì˜¤ë¥¸ìª½ ê°’ì´ ê°™ìœ¼ë©´ NULLì„ ì¶œë ¥í•˜ê³  ë‹¤ë¥´ë©´ ì™¼ìª½ê°’ì„ ì¶œë ¥í•˜ë¼ëŠ” í•¨ìˆ˜
    NULLIF(member_name,'ìˆ˜ì§„') NAME2,

    -- COALESCE : ì¸ìê°’ ì¤‘ì—ì„œ NULLì´ ì•„ë‹Œ ìµœì´ˆì˜ê°’ì„ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜
    -- ë¯¸ì—° : NULLì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— real_name í™•ì¸ => ì¡°ë¯¸ì—° ê°’ ê°€ì ¸ì˜¨ë‹¤ (ì•„ë˜ ì¶œë ¥í™”ë©´ í™•ì¸)
    -- ë¯¼ë‹ˆ : NULL ì•„ë‹ˆê¸° ë•Œë¬¸ì— real_name í™•ì¸ => NULLì´ê¸° ë•Œë¬¸ì— MEMBER_NAME ê°€ì ¸ì˜¨ë‹¤ (ì•„ë˜ ì¶œë ¥í™”ë©´ í™•ì¸)
    COALESCE(NULL,real_name,MEMBER_NAME)NAME3
    FROM idol_member
    WHERE group_name = '(ì—¬ì)ì•„ì´ë“¤';        
    ```
â–¶ ì¶œë ¥í™”ë©´

![NULLì¶œë ¥í™”ë©´](https://user-images.githubusercontent.com/65608960/109420262-cea84180-7a14-11eb-8165-e66e263eb9fc.JPG)
